# LAS_student
Lab reservation website for students.
## Roles:
### Frontend
> Igor and Nhi
### Backend
> Minh and Wei

## How to Run:
1. **Download XAMPP**:  
   - [Download XAMPP](https://www.apachefriends.org/).
   
2. **Clone the Repository**:  
   - After installing XAMPP, clone this repo into the `C:\xampp\htdocs\` folder.

3. **Start XAMPP**:
   - Open the XAMPP Control Panel.
   - Press **Start** for both **Apache** and **MySQL** services.

4. **Troubleshooting**:
   - If either **Apache** or **MySQL** does not start, check the ports they are using (often due to conflicts).
   - Also, for **MySQL**, check if it's already running in the **Task Manager**.
     - If MySQL is running, end the process and try starting it again.

5. **Go to the Website**:
   - If both services are running, open your browser and go to:
     ```
     http://localhost/<folder-name>
     ```
     Replace `<folder-name>` with the actual folder name where the repo is in the `htdocs` directory.



# LAS Database Structure and Example Data

This provides an overview of the database structure and example SQL commands for inserting data.

## Table Structures

### 1. `labs`
This table contains information about the labs available for reservation.
* ``lab_id`` will be the code of lab address, for example: #85501 means #501 room in building 85
* ``capacity`` is the max number of students can reserve the lab at the same time.
```sql
CREATE TABLE `labs` (
  `lab_id` varchar(5) NOT NULL PRIMARY KEY,
  `lab_name` varchar(255) NOT NULL UNIQUE,
  `address` varchar(255) NOT NULL,
  `img_path` varchar(255) DEFAULT NULL,
  `capacity` int NOT NULL CHECK (capacity > 0)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### 2. `reservations`
This table stores information about lab reservations made by users.
* ``reservation_id`` will be the id generated by the time stamp + random number(0~900)
* ``verified`` is for verify symbol for facial identification
```sql
CREATE TABLE `reservations` (
  `reservation_id` varchar(12) NOT NULL,
  `lab_id` varchar(5) NOT NULL,
  `user_id` varchar(10) NOT NULL,
  `date` date NOT NULL,
  `time` varchar(5) DEFAULT NULL,
  `verified` BOOLEAN NOT NULL DEFAULT FALSE,
  PRIMARY KEY (reservation_id),         			 -- PK
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,  
  FOREIGN KEY (lab_id) REFERENCES labs(lab_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### 3. `users`
This table stores user information, including their ID, username, and password.
* ``id`` is the student id
```sql
CREATE TABLE `users` (
  `id` varchar(10) NOT NULL PRIMARY KEY,
  `username` varchar(50) NOT NULL UNIQUE,
  `password` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### 4. `user_info`
This table stores additional information about the users, such as phone number, email, and profile photo.
```sql
CREATE TABLE `user_info` (
  `id` varchar(10) NOT NULL,
  `username` varchar(50) DEFAULT NULL,
  `phonenumber` varchar(20) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `photo_path` varchar(255) DEFAULT NULL,
  PRIMARY KEY (id),         			 -- PK
  FOREIGN KEY (id) REFERENCES users(id) ON DELETE CASCADE,  
  FOREIGN KEY (username) REFERENCES users(username) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### 5. `lab_stu`
This table stores the dependencies between students and labs
```sql
CREATE TABLE `lab_stu` (
  `lab_id` varchar(5) NOT NULL,
  `user_id` varchar(10) NOT NULL,
  PRIMARY KEY (lab_id,user_id),         			 -- PK
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,  
  FOREIGN KEY (lab_id) REFERENCES labs(lab_id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

## Inserting Example Data

### 1. `labs` table:
```sql
INSERT INTO `labs` (`lab_id`, `lab_name`, `address`, `img_path`) VALUES
(33187, 'Physics Lab', 'Building 33', 'img/physics.jpg', 3),
(56123, 'Chemistry Lab', 'Building 56', 'img/chem.jpg', 5),
(66145, 'Biology Lab', 'Building 66', 'img/biology.jpg', 5);
```

### 2. `reservations` table:
```sql
INSERT INTO `reservations` (`reservation_id`, `lab_id`, `user_id`, `date`, `time`) VALUES
(202410130531, 33187, '2022315699', '2024-10-17', '10:00'),
(202409020830, 33187, '2022315699', '2024-10-17', '11:00'),
(202410102521, 33187, '2022315699', '2024-10-18', '12:00'),
(202409202125, 56123, '2022315699', '2024-10-17', '13:00'),
(202409301217, 56123, '2022315699', '2024-10-17', '14:00'),
(202409181619, 56123, '2022315699', '2024-10-18', '15:00'),
(202409171645, 66145, '2022315699', '2024-10-17', '16:00'),
(202409211711, 66145, '2022315699', '2024-10-17', '17:00'),
(202409171809, 66145, '2022315699', '2024-10-18', '18:00'),
(202409291018, 33187, '2022312312', '2024-10-18', '11:00'),
(202410011356, 33187, '2022315699', '2024-10-19', '11:00');
```

### 3. users table:
```sql
INSERT INTO `users` (`id`, `username`, `password`) VALUES
('2022312312', 'lee', '$2y$10$hetL5okks7UmXE88kjxbbupn7c.zExV9IouXqF/j/ABLrwqrzEwpy'),
('2022315699', 'igor', '$2y$10$S217uMA6SncHN4oofdt5peF3rM0O.3KTsRzieFBePPXVL335X2W7K');
```

### 4. `user_info` table:
```sql
INSERT INTO `user_info` (`id`, `username`, `phonenumber`, `email`, `photo_path`) VALUES
('2022123456', 'john', '1234567890', 'john@ex.com', 'img/photo.jpg');
```

## Indexes and Constraints


### Indexes for `labs`:
```sql
ALTER TABLE `labs`
  ADD PRIMARY KEY (`lab_id`);
```
### Indexes for `reservations`:
```sql
ALTER TABLE `reservations`
  ADD PRIMARY KEY (`reservation_id`),
  ADD KEY `lab_id` (`lab_id`),
  ADD KEY `user_id` (`user_id`);
```
### Indexes for `users`:
```sql
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `username` (`username`);
```
### Indexes for `user_info`:
```sql
ALTER TABLE `user_info`
  ADD PRIMARY KEY (`id`),
  ADD KEY `username` (`username`);
```

## Constraints
### Constraints for `reservations`:
```sql
ALTER TABLE `reservations`
  ADD CONSTRAINT `reservations_ibfk_1` FOREIGN KEY (`lab_id`) REFERENCES `labs` (`lab_id`) ON DELETE CASCADE,
  ADD CONSTRAINT `reservations_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;
```
### Constraints for `user_info`:
```sql
ALTER TABLE `user_info`
  ADD CONSTRAINT `user_info_ibfk_1` FOREIGN KEY (`id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `user_info_ibfk_2` FOREIGN KEY (`username`) REFERENCES `users` (`username`) ON DELETE CASCADE;
```
### Auto-Increment for `reservations` table:
```sql
ALTER TABLE `reservations`
  MODIFY `reservation_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=24;
```


